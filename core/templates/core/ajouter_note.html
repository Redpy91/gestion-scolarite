{% extends 'core/base.html' %}

{% block title %}Ajouter une note{% endblock %}

{% block content %}
<div class="container mt-4">

    <h2 class="text-white mb-4">
        âž• Ajouter une note pour {{ eleve.nom }} {{ eleve.prenom }}
    </h2>

    <!-- Messages Django -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
    {% endif %}

    <form method="POST"
          action="{% url 'ajouter_note' eleve.id %}"
          class="card p-4 shadow bg-dark text-white">

        {% csrf_token %}

        <!-- MatiÃ¨re -->
        <div class="mb-3">
            <label for="matiere" class="form-label">MatiÃ¨re</label>
            <select name="matiere"
                    class="form-select bg-secondary text-white"
                    required>
                {% for matiere in matieres %}
                <option value="{{ matiere.id }}">
                    {{ matiere.get_nom_display }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- Type de note -->
        <div class="mb-3">
            <label for="type_note" class="form-label">Type dâ€™Ã©valuation</label>
            <select name="type_note"
                    class="form-select bg-secondary text-white"
                    required>
                <option value="">--- Choisir ---</option>
                <option value="I1">Interrogation 1</option>
                <option value="I2">Interrogation 2</option>
                <option value="I3">Interrogation 3</option>
                <option value="D1">Devoir 1</option>
                <option value="D2">Devoir 2</option>
                <option value="D3">Devoir 3</option>
                <option value="C">Composition</option>
            </select>
        </div>

        <!-- Valeur -->
        <div class="mb-3">
            <label for="valeur" class="form-label">Note (/20)</label>
            <input type="number"
                   step="0.01"
                   min="0"
                   max="20"
                   name="valeur"
                   class="form-control bg-secondary text-white"
                   required>
        </div>

        <!-- Semestre -->
        <div class="mb-4">
            <label for="semestre" class="form-label">Semestre</label>
            <select name="semestre"
                    class="form-select bg-secondary text-white"
                    required>
                <option value="1">Semestre 1</option>
                <option value="2">Semestre 2</option>
            </select>
        </div>

        <!-- Boutons -->
        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-success">
                ðŸ’¾ Ajouter la note
            </button>

            <a href="{% url 'detail_eleve' eleve.id %}"
               class="btn btn-secondary">
                â¬… Retour
            </a>
        </div>

    </form>
</div>
{% endblock %}
